[&#8617; 返回总览](../README.md)

---

## 10. 视觉与音频反馈系统

“游戏感”（Game Feel）或“果汁感”（Juice）是提升玩家体验的关键。本系统旨在让开发者能够通过数据配置轻松地添加丰富的视听效果。

### 10.1. `FXManager`：效果的中心枢纽

我们将创建一个`FXManager`自动加载单例，作为所有临时性视觉效果（VFX）和音效（SFX）的播放中心。这个管理器将监听全局`Events`总线上的事件，如`entity_took_damage`或`player_picked_up_item`。

### 10.2. `FXProfile`：数据驱动的效果

为了将效果与事件解耦，我们将使用`Resource`来定义效果配置。
* **`FXProfile.gd` (extends `Resource`)**: 这个资源用于将一个事件名称与一个或多个效果关联起来。
* **效果类型**: `FXProfile`可以包含对以下资源的引用：
    * **VFX**: 一个要实例化的粒子效果或动画场景（`PackedScene`）。
    * **SFX**: 一个要播放的音频流（`AudioStream`）。
    * **屏幕震动**: 包含强度和持续时间等参数的数据。
* **工作流程**: 当一个实体（如敌人）受到伤害时，它只需向全局事件总线发出`entity_took_damage`事件，并附带其位置和伤害类型等信息。`FXManager`监听到该事件后，会查找与该事件关联的`FXProfile`，并在指定位置播放相应的粒子效果和音效。这种设计使得添加或修改反馈效果完全成为数据配置工作，无需更改任何游戏逻辑代码。